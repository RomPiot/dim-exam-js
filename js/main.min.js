const jsonData="../data/share-of-individuals-using-the-internet.json";var json,app=new Vue({el:"#app",data:{datas:[],years:[],dataCountries:[]},methods:{activate:function(){},key:function(item){return item.country+"-"+item.year},roundFloat:float=>(val=parseFloat(float),val.toFixed(1)),filterCountry:function(){$(".filter-country").on("keyup",(function(){var value=$(this).val().toLowerCase();$("a.country").filter((function(){var countryName=$(this).text().toLowerCase().trim();$(this).parent().toggle(countryName.indexOf(value)>-1)}))}))},myChart:function(country){var canvas;(canvas=document.getElementById("myChart")).remove(),$("#app").append('<canvas id="myChart" width="400" height="200"></canvas>');var canvas,ctx=(canvas=document.getElementById("myChart")).getContext("2d");ctx.clearRect(0,0,canvas.width,canvas.height),app.dataCountries.forEach(element=>{if(element.name===country){console.log(element),Chart.defaults.global.defaultFontColor="#cfcfcf";var myChart=new Chart(ctx,{type:"line",data:{labels:element.years,datasets:[{label:element.name,data:element.percents,backgroundColor:element.backgroundColor,borderColor:element.borderColor,borderWidth:1}]},options:{legend:{labels:{fontColor:"white"}},scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})}})}},computed:{highestYear(){if(0!=this.datas.length)return this.datas.reduce((a,b)=>Number(a.year)>Number(b.year)?a.year:b.year)},lowestYear(){if(0!=this.datas.length)return this.datas.reduce((a,b)=>{a&&b&&(Number(a.year)>Number(b.year)?a.year:b.year)})},uniqueCountry(){return this.datas.reduce((seed,current)=>Object.assign(seed,{[current.country]:current}),{})},uniqueYear(){return this.datas.reduce((seed,current)=>Object.assign(seed,{[current.year]:current.year}),{})}},mounted:function(){var newCountry;axios.get(jsonData).then((function(response){app.datas=response.data})),setTimeout(()=>{this.datas.forEach(element=>{})},500),setTimeout(()=>{this.datas.reduce((seed,current)=>{-1==this.years.indexOf(current.year)&&app.years.push(current.year)},{}),setTimeout(()=>{this.years.sort()},1e3)},1e3);var lastCountry="";function random_rgba(){var o=Math.round,r=Math.random,s=255;return"rgba("+o(r()*s)+","+o(r()*s)+","+o(r()*s)+", 0.4)"}setTimeout(()=>{this.datas.forEach(element=>{console.log(element),element.country!=lastCountry?(void 0!==newCountry&&(newCountry.percents.push(100),app.dataCountries.push(newCountry)),newCountry={name:element.country,years:[element.year],percents:[element.percent],backgroundColor:[random_rgba()],borderColor:[random_rgba()],borderWidth:1}):(newCountry.years.push(element.year),newCountry.percents.push(element.percent)),lastCountry=element.country}),newCountry.percents.push(100),app.dataCountries.push(newCountry),console.log(app.dataCountries)},2e3)}});