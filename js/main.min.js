const jsonData="../data/share-of-individuals-using-the-internet.json";var json,app=new Vue({el:"#app",data:{datas:[],years:[],dataCountry:[]},methods:{activate:function(){},key:function(item){return item.country+"-"+item.year},roundFloat:float=>(val=parseFloat(float),val.toFixed(1)),filterCountry:function(){$(".filter-country").on("keyup",(function(){var value=$(this).val().toLowerCase();$("a.country").filter((function(){var countryName=$(this).text().toLowerCase().trim();$(this).parent().toggle(countryName.indexOf(value)>-1)}))}))},myChart:function(){var ctx=document.getElementById("myChart").getContext("2d"),allYears=this.years,fullCountries=[],newCountry,lastCountry="",n=0;function random_rgba(){var o=Math.round,r=Math.random,s=255;return"rgba("+o(r()*s)+","+o(r()*s)+","+o(r()*s)+", 0.2)"}setTimeout(()=>{this.datas.forEach(element=>{n<5&&(element.country!=lastCountry?(n++,void 0!==newCountry&&fullCountries.push(newCountry),newCountry={label:element.country,data:[element.percent],backgroundColor:[random_rgba()],borderColor:[random_rgba()],borderWidth:1}):newCountry.data.push(element.percent)),lastCountry=element.country}),fullCountries.push(newCountry)},2e3),setTimeout(()=>{console.log(fullCountries);var myChart=new Chart(ctx,{type:"line",data:{labels:allYears,datasets:fullCountries},options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})},2e3)}},computed:{highestYear(){if(0!=this.datas.length)return this.datas.reduce((a,b)=>Number(a.year)>Number(b.year)?a.year:b.year)},lowestYear(){if(0!=this.datas.length)return this.datas.reduce((a,b)=>{a&&b&&(Number(a.year)>Number(b.year)?a.year:b.year)})},uniqueCountry(){return this.datas.reduce((seed,current)=>Object.assign(seed,{[current.country]:current}),{})},uniqueYear(){return this.datas.reduce((seed,current)=>Object.assign(seed,{[current.year]:current.year}),{})}},mounted:function(){axios.get(jsonData).then((function(response){app.datas=response.data})),setTimeout(()=>{this.datas.forEach(element=>{})},500),setTimeout(()=>{this.datas.reduce((seed,current)=>{-1==this.years.indexOf(current.year)&&app.years.push(current.year)},{}),setTimeout(()=>{this.years.sort()},1e3)},1e3)}});